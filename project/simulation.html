<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>시뮬레이션 | Better In Focus</title>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'bg-main': '#f5f7f4',
                        'green-mid': '#AFD99C',
                        'green-point': '#0B8C07',
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f5f7f4;
            color: #2D3B2C;
            touch-action: manipulation;
        }
        .card {
            transition: all 0.3s ease;
            background-color: #FFFFFF;
            border-radius: 16px;
            box-shadow: 0 2px 10px rgba(11,140,7,0.07);
            padding: 1.5rem 1.2rem;
            margin-bottom: 1.2rem;
        }
        .logo {
            font-family: 'Noto Sans KR', sans-serif;
            font-weight: 700;
            font-size: 1.25rem;
            color: #0B8C07;
            display: flex;
            align-items: center;
        }
        .logo svg {
            margin-right: 8px;
        }
        .sim-btn, .sim-choice-btn {
            width: 100%;
            padding: 0.9rem 1rem;
            border-radius: 8px;
            font-size: 1.08rem;
            font-weight: 500;
            margin-bottom: 16px;
            border: none;
            cursor: pointer;
            background: #f5f7f4;
            color: #2D3B2C;
            box-shadow: 0 2px 6px rgba(0,0,0,0.08);
            transition: filter 0.15s, transform 0.15s, box-shadow 0.15s;
        }
        .sim-btn:last-child, .sim-choice-btn:last-child { margin-bottom: 0; }
        .sim-btn.selected, .sim-btn:active, .sim-choice-btn.selected, .sim-choice-btn:active {
            background: #AFD99C;
            color: #0B8C07;
            font-weight: 700;
        }
        .sim-feedback {
            border-radius: 10px;
            padding: 1rem 1.2rem;
            margin: 1.2rem 0 0.5rem 0;
            font-weight: 500;
            font-size: 1.08rem;
            display: flex;
            align-items: center;
            gap: 0.7rem;
        }
        .sim-feedback.positive {
            background: #e6f9e6;
            color: #0B8C07;
        }
        .sim-feedback.neutral {
            background: #fff7e6;
            color: #F59E0B;
        }
        .sim-feedback.negative {
            background: #ffeaea;
            color: #EF4444;
        }
        .sim-avatar {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            object-fit: cover;
            background: #eee;
            border: 2px solid #AFD99C;
        }
        .sim-bubble {
            background: #f5f7f4;
            border-radius: 16px;
            padding: 1.1rem 1.3rem;
            margin: 0.7rem 0 1.2rem 0;
            font-size: 1.08rem;
            color: #2D3B2C;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            position: relative;
            display: inline-block;
            max-width: 90%;
        }
        .sim-bubble:after {
            content: '';
            position: absolute;
            left: 24px;
            bottom: -14px;
            width: 18px;
            height: 18px;
            background: #f5f7f4;
            border-radius: 50%;
            z-index: 0;
        }
        .sim-tts-btn {
            background: none;
            border: none;
            color: #0B8C07;
            font-size: 1.2rem;
            margin-left: 8px;
            cursor: pointer;
            vertical-align: middle;
        }
        .sim-end-btn {
            width: 100%;
            background: #0B8C07;
            color: #fff;
            font-weight: 700;
            border-radius: 8px;
            padding: 0.9rem 0;
            margin-top: 2rem;
            font-size: 1.08rem;
            box-shadow: 0 2px 8px rgba(11,140,7,0.13);
            border: none;
            cursor: pointer;
            transition: background 0.15s, transform 0.13s;
        }
        .sim-end-btn:hover {
            background: #0a7a06;
            transform: scale(1.03);
        }
    </style>
</head>
<body>
    <div class="min-h-screen flex flex-col justify-between items-center" style="background:#f5f7f4;">
      <div class="w-full" id="root"></div>
      <footer class="fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-100">
        <div class="flex justify-around">
          <button class="flex flex-col items-center py-3 px-6 text-gray-400 hover:text-gray-600" onClick="window.location.href='diary.html'">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span class="text-xs mt-1">감정 일기</span>
          </button>
          <button class="flex flex-col items-center py-3 px-6 text-gray-400 hover:text-gray-600" onClick="window.location.href='intdex.html'">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
            </svg>
            <span class="text-xs mt-1">할 일</span>
          </button>
          <button class="flex flex-col items-center py-3 px-6 text-green-point" onClick="window.location.href='simulation.html'">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4" />
            </svg>
            <span class="text-xs mt-1">시뮬레이션</span>
          </button>
        </div>
      </footer>
    </div>
    <script type="text/babel">
        // 헤더 컴포넌트 (intdex.html 스타일)
        const Header = () => (
          <header className="bg-white shadow-sm py-4 px-5 flex justify-between items-center sticky top-0 z-10">
            <div className="logo">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="12"></line>
                <line x1="12" y1="16" x2="12.01" y2="16"></line>
              </svg>
              Better In Focus
            </div>
          </header>
        );

        // 샘플 시뮬레이션 주제 목록
        const simulationTopics = [
            { id: 1, title: '친구와 갈등 상황', desc: '친구와의 오해를 풀어보는 대화 연습' },
            { id: 2, title: '식당에서 주문 실수', desc: '점원에게 정중하게 상황을 설명해보기' },
            { id: 3, title: '학교 발표에서 질문받기', desc: '발표 후 질문에 침착하게 답변하기' },
        ];

        // 샘플 시뮬레이션 대화 단계 데이터
        const simulationSteps = [
            {
                situation: '친구가 나에게 화가 난 것 같아요. 어떻게 대화를 시작할까요?',
                avatar: 'https://randomuser.me/api/portraits/women/44.jpg',
                bubble: '왜 나한테 그렇게 말했어?',
                choices: [
                    { text: '미안해, 내 의도가 그게 아니었어.', feedback: 'positive', feedbackMsg: '잘하셨어요! 진심 어린 사과는 관계 회복에 도움이 돼요.' },
                    { text: '네가 너무 예민한 거 아니야?', feedback: 'negative', feedbackMsg: '다시 해볼까요? 상대방의 감정을 먼저 인정해 주세요.' },
                    { text: '그냥 넘어가자.', feedback: 'neutral', feedbackMsg: '다음엔 이렇게 해보는 건 어떨까요? 감정을 무시하기보단 대화를 시도해보세요.' },
                ]
            },
            {
                situation: '친구가 내 사과를 듣고 있어요.',
                avatar: 'https://randomuser.me/api/portraits/women/44.jpg',
                bubble: '정말 그렇게 생각한 거야?',
                choices: [
                    { text: '응, 미안해. 앞으로 조심할게.', feedback: 'positive', feedbackMsg: '훌륭해요! 앞으로의 행동을 약속하는 것도 좋아요.' },
                    { text: '아니, 그냥 장난이었어.', feedback: 'negative', feedbackMsg: '다시 해볼까요? 장난이라도 상처가 될 수 있어요.' },
                ]
            }
        ];

        // 종료 피드백 예시
        const endFeedbacks = [
            { type: 'positive', msg: '훌륭해요! 앞으로도 이렇게 대화해보세요.' },
            { type: 'neutral', msg: '다음엔 더 열심히 해봐요!' },
            { type: 'negative', msg: '조금만 더 노력해봐요!' },
        ];

        // 시뮬레이션 단계: select, run, end
        const SimulationApp = () => {
            const [step, setStep] = React.useState('select');
            const [selectedTopic, setSelectedTopic] = React.useState(null);
            const [currentIdx, setCurrentIdx] = React.useState(0);
            const [selectedChoice, setSelectedChoice] = React.useState(null);
            const [showFeedback, setShowFeedback] = React.useState(false);
            const [feedbackType, setFeedbackType] = React.useState(null);
            const [feedbackMsg, setFeedbackMsg] = React.useState('');
            const [endType, setEndType] = React.useState('positive');

            // 시뮬레이션 주제 선택
            if (step === 'select') {
                return (
                    <>
                        <Header />
                        <main className="container mx-auto px-4 py-8">
                            <div className="w-full max-w-md mx-auto card">
                                <h2 className="text-xl font-bold mb-4 text-gray-800">시뮬레이션 주제 선택</h2>
                                {simulationTopics.map(topic => (
                                    <button key={topic.id} className={`sim-btn${selectedTopic === topic.id ? ' selected' : ''}`} onClick={() => { setSelectedTopic(topic.id); setTimeout(()=>setStep('run'), 300); }}>
                                        <div className="font-bold mb-1">{topic.title}</div>
                                        <div className="text-xs text-gray-500">{topic.desc}</div>
                                    </button>
                                ))}
                            </div>
                        </main>
                    </>
                );
            }

            // 시뮬레이션 진행
            if (step === 'run') {
                const sim = simulationSteps[currentIdx];
                return (
                    <>
                        <Header />
                        <main className="container mx-auto px-4 py-8">
                            <div className="w-full max-w-md mx-auto card">
                                <div className="mb-3 text-gray-700 text-base font-medium">{sim.situation}</div>
                                <div className="flex items-center mb-2">
                                    <img src={sim.avatar} alt="상대방" className="sim-avatar mr-3" />
                                    <div className="sim-bubble">
                                        {sim.bubble}
                                        <button className="sim-tts-btn" title="음성 듣기" onClick={()=>alert('TTS 재생')}>
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 19l-7-7 7-7" /></svg>
                                        </button>
                                    </div>
                                </div>
                                <div className="mt-6">
                                    {sim.choices.map((choice, idx) => (
                                        <button key={idx} className={`sim-choice-btn${selectedChoice === idx ? ' selected' : ''}`} onClick={() => {
                                            setSelectedChoice(idx);
                                            setShowFeedback(true);
                                            setFeedbackType(choice.feedback);
                                            setFeedbackMsg(choice.feedbackMsg);
                                            if (currentIdx === simulationSteps.length - 1) {
                                                setTimeout(() => { setStep('end'); setEndType(choice.feedback); }, 1200);
                                            } else {
                                                setTimeout(() => {
                                                    setShowFeedback(false);
                                                    setSelectedChoice(null);
                                                    setCurrentIdx(currentIdx + 1);
                                                }, 1200);
                                            }
                                        }}>{choice.text}</button>
                                    ))}
                                </div>
                                {showFeedback && (
                                    <div className={`sim-feedback ${feedbackType}`}>{feedbackMsg}</div>
                                )}
                            </div>
                        </main>
                    </>
                );
            }

            // 시뮬레이션 종료
            if (step === 'end') {
                const feedback = endFeedbacks.find(f => f.type === endType) || endFeedbacks[0];
                return (
                    <>
                        <Header />
                        <main className="container mx-auto px-4 py-8">
                            <div className="w-full max-w-md mx-auto card text-center">
                                <div className={`sim-feedback ${feedback.type} mb-4`} style={{justifyContent:'center'}}>{feedback.msg}</div>
                                <button className="sim-end-btn" onClick={()=>{ setStep('select'); setCurrentIdx(0); setSelectedChoice(null); setShowFeedback(false); }}>다른 시뮬레이션 선택하기</button>
                            </div>
                        </main>
                    </>
                );
            }
        };
        ReactDOM.render(<SimulationApp />, document.getElementById('root'));
    </script>
</body>
</html> 
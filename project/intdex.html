<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Better In Focus</title>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'bg-main': '#f4f5f4',
                        'green-mid': '#88C16F', // Your requested mid-level color
                        'green-point': '#0B8C07', // Your requested point color
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f4f5f4; /* Background color as requested */
            color: #2D3B2C;
            touch-action: manipulation;
        }
        
        .card {
            transition: all 0.3s ease;
            cursor: grab;
            background-color: #FFFFFF; /* White card background */
        }
        
        .card:active {
            cursor: grabbing;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(11, 140, 7, 0.08);
        }
        
        .tab-active {
            background-color: #88C16F; /* Mid-level color for active tab */
            color: #FFFFFF;
            font-weight: 700;
        }
        
        .card-container {
            perspective: 1000px;
        }
        
        .card-deck {
            position: relative;
            height: 100%;
            width: 100%;
        }
        
        .sequence-card {
            backface-visibility: hidden;
            transition: transform 0.6s ease-in-out;
        }
        
        .custom-checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid #0B8C07;
            border-radius: 6px;
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .custom-checkbox.checked {
            background-color: #0B8C07;
        }
        
        .custom-checkbox.checked::after {
            content: '✓';
            color: white;
            font-size: 16px;
            font-weight: bold;
        }
        
        .task-text.completed {
            text-decoration: line-through;
            color: #a0a0a0;
        }
        
        .add-button {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 60px;
            height: 60px;
            background-color: #0B8C07; /* Point color for add button */
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            box-shadow: 0 4px 10px rgba(11, 140, 7, 0.3);
            z-index: 10;
            transition: all 0.3s;
        }
        
        .add-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 15px rgba(11, 140, 7, 0.4);
        }
        
        .progress-bar {
            height: 8px;
            border-radius: 4px;
            background-color: #E5F0DE;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .task-summary {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .task-summary.expanded {
            max-height: 500px;
        }
        
        .card-wrapper {
            position: relative;
            overflow: hidden;
            margin-bottom: 16px;
            border-radius: 12px;
        }
        
        .card-actions {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            display: flex;
            align-items: center;
            transform: translateX(-100%);
            transition: transform 0.3s ease;
            padding-left: 10px;
        }
        
        .card-wrapper.swiped .card {
            transform: translateX(100px);
        }
        
        .card-wrapper.swiped .card-actions {
            transform: translateX(0);
        }
        
        .action-button {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            margin-right: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .logo {
            font-family: 'Noto Sans KR', sans-serif;
            font-weight: 700;
            font-size: 1.25rem;
            color: #0B8C07; /* Point color for logo */
            display: flex;
            align-items: center;
        }
        
        .logo svg {
            margin-right: 8px;
        }
        
        .swipe-hint {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #88C16F; /* Mid-level color for hint */
            opacity: 0.7;
            animation: swipeHint 2s infinite;
            pointer-events: none;
        }
        
        @keyframes swipeHint {
            0% { transform: translateY(-50%) translateX(0); opacity: 0.7; }
            50% { transform: translateY(-50%) translateX(-10px); opacity: 1; }
            100% { transform: translateY(-50%) translateX(0); opacity: 0.7; }
        }
        
        /* Random color classes for cards */
        .color-purple { color: #8B5CF6; }
        .color-blue { color: #3B82F6; }
        .color-green { color: #10B981; }
        .color-yellow { color: #F59E0B; }
        .color-red { color: #EF4444; }
        .color-pink { color: #EC4899; }
        .color-indigo { color: #6366F1; }
        .color-teal { color: #14B8A6; }
        
        .bg-light-purple { background-color: #EDE9FE; }
        .bg-light-blue { background-color: #DBEAFE; }
        .bg-light-green { background-color: #D1FAE5; }
        .bg-light-yellow { background-color: #FEF3C7; }
        .bg-light-red { background-color: #FEE2E2; }
        .bg-light-pink { background-color: #FCE7F3; }
        .bg-light-indigo { background-color: #E0E7FF; }
        .bg-light-teal { background-color: #CCFBF1; }
        
        .bg-medium-purple { background-color: #A78BFA; }
        .bg-medium-blue { background-color: #60A5FA; }
        .bg-medium-green { background-color: #34D399; }
        .bg-medium-yellow { background-color: #FBBF24; }
        .bg-medium-red { background-color: #F87171; }
        .bg-medium-pink { background-color: #F472B6; }
        .bg-medium-indigo { background-color: #818CF8; }
        .bg-medium-teal { background-color: #2DD4BF; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // 현재 날짜 포맷팅 함수
        const formatDate = () => {
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
            return now.toLocaleDateString('ko-KR', options);
        };

        // 랜덤 색상 선택 함수
        const getRandomColor = () => {
            const colors = ['purple', 'blue', 'green', 'yellow', 'red', 'pink', 'indigo', 'teal'];
            return colors[Math.floor(Math.random() * colors.length)];
        };

        // 로고 컴포넌트
        const Logo = () => {
            return (
                <div className="logo">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="12"></line>
                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                    </svg>
                    Better In Focus
                </div>
            );
        };

        // 헤더 컴포넌트
        const Header = () => {
            return (
                <header className="bg-white shadow-sm py-4 px-5 flex justify-between items-center sticky top-0 z-10">
                    <Logo />
                    <button className="w-10 h-10 bg-green-mid bg-opacity-20 rounded-full flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 text-green-point" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                    </button>
                </header>
            );
        };

        // 날짜 표시 컴포넌트
        const DateDisplay = () => {
            return (
                <div className="text-left py-4 text-lg font-medium text-gray-800 px-1">
                    {formatDate()}
                </div>
            );
        };

        // 탭 컴포넌트
        const TabMenu = ({ activeTab, setActiveTab }) => {
            return (
                <div className="flex mb-6 bg-white rounded-lg shadow-sm overflow-hidden">
                    <button 
                        className={`flex-1 py-3 text-center transition-colors ${activeTab === 'routine' ? 'tab-active' : ''}`}
                        onClick={() => setActiveTab('routine')}
                    >
                        루틴
                    </button>
                    <button 
                        className={`flex-1 py-3 text-center transition-colors ${activeTab === 'todo' ? 'tab-active' : ''}`}
                        onClick={() => setActiveTab('todo')}
                    >
                        할 일
                    </button>
                </div>
            );
        };

        // 프로그레스 바 컴포넌트
        const ProgressBar = ({ completed, total, color }) => {
            const percentage = total > 0 ? (completed / total) * 100 : 0;
            
            return (
                <div className="mt-4">
                    <div className="flex justify-between mb-1">
                        <span className="text-sm text-gray-700">진행도</span>
                        <span className="text-sm text-gray-700">{completed}/{total}</span>
                    </div>
                    <div className="progress-bar">
                        <div 
                            className={`progress-fill bg-medium-${color}`}
                            style={{ width: `${percentage}%` }}
                        ></div>
                    </div>
                </div>
            );
        };

        // 체크박스 컴포넌트
        const Checkbox = ({ label, isChecked, onToggle }) => {
            return (
                <div className="checkbox-container flex items-center mb-3">
                    <div 
                        className={`custom-checkbox ${isChecked ? 'checked' : ''}`}
                        onClick={onToggle}
                    ></div>
                    <span className={`task-text ${isChecked ? 'completed' : ''}`}>{label}</span>
                </div>
            );
        };

        // 체크리스트 컴포넌트
        const CheckList = ({ tasks, color }) => {
            const [checkedItems, setCheckedItems] = React.useState(
                tasks.map(() => false)
            );
            
            const toggleCheckbox = (index) => {
                const newCheckedItems = [...checkedItems];
                newCheckedItems[index] = !newCheckedItems[index];
                setCheckedItems(newCheckedItems);
            };
            
            const completedCount = checkedItems.filter(Boolean).length;
            
            return (
                <div className="checklist-container">
                    {tasks.map((task, index) => (
                        <Checkbox 
                            key={index}
                            label={task}
                            isChecked={checkedItems[index]}
                            onToggle={() => toggleCheckbox(index)}
                        />
                    ))}
                    
                    <ProgressBar 
                        completed={completedCount}
                        total={tasks.length}
                        color={color}
                    />
                </div>
            );
        };

        // 순서 카드 컴포넌트
        const SequenceCard = ({ tasks, color }) => {
            const [activeIndex, setActiveIndex] = React.useState(0);
            const [completedTasks, setCompletedTasks] = React.useState(
                tasks.map(() => false)
            );
            
            const goToPrevious = () => {
                if (activeIndex > 0) {
                    setActiveIndex(activeIndex - 1);
                }
            };
            
            const goToNext = () => {
                if (activeIndex < tasks.length - 1) {
                    // 현재 작업을 완료로 표시하고 다음으로 이동
                    const newCompletedTasks = [...completedTasks];
                    newCompletedTasks[activeIndex] = true;
                    setCompletedTasks(newCompletedTasks);
                    setActiveIndex(activeIndex + 1);
                } else {
                    // 마지막 작업 완료 표시
                    const newCompletedTasks = [...completedTasks];
                    newCompletedTasks[activeIndex] = true;
                    setCompletedTasks(newCompletedTasks);
                }
            };
            
            const activeTask = tasks[activeIndex];
            const completedCount = completedTasks.filter(Boolean).length;
            
            return (
                <>
                    <div className="card-container h-48">
                        <div className="card-deck">
                            <div className={`sequence-card bg-light-${color} p-4 rounded-lg text-center`}>
                                <div className="flex items-center justify-center">
                                    <span className={`text-sm color-${color} font-medium`}>
                                        {activeIndex + 1}/{tasks.length}
                                    </span>
                                </div>
                                <h4 className="text-lg font-medium mt-2 mb-3">{activeTask.title}</h4>
                                <p className="text-gray-700">{activeTask.description}</p>
                            </div>
                        </div>
                    </div>
                    
                    <ProgressBar 
                        completed={completedCount}
                        total={tasks.length}
                        color={color}
                    />
                    
                    <div className="flex justify-between mt-4">
                        <button 
                            className={`bg-light-${color} hover:bg-opacity-80 color-${color} py-2 px-4 rounded-lg transition ${activeIndex === 0 ? 'opacity-50 cursor-not-allowed' : ''}`}
                            onClick={goToPrevious}
                            disabled={activeIndex === 0}
                        >
                            이전
                        </button>
                        <button 
                            className={`bg-medium-${color} hover:bg-opacity-80 text-white py-2 px-4 rounded-lg transition ${completedTasks[activeIndex] ? 'opacity-50 cursor-not-allowed' : ''}`}
                            onClick={goToNext}
                            disabled={completedTasks[activeIndex]}
                        >
                            {activeIndex === tasks.length - 1 ? '완료' : '다음'}
                        </button>
                    </div>
                </>
            );
        };

        // 카드 상세 컴포넌트
        const CardDetail = ({ card }) => {
            return (
                <div className="bg-white rounded-xl shadow-md p-5 card">
                    <div className="flex justify-between items-center mb-4">
                        <h3 className={`text-lg font-bold color-${card.color}`}>{card.title}</h3>
                        <span className={`bg-light-${card.color} color-${card.color} text-sm py-1 px-3 rounded-full`}>
                            {card.type === 'sequence' ? '순서 있음' : '체크리스트'}
                        </span>
                    </div>
                    
                    {card.type === 'sequence' ? (
                        <SequenceCard tasks={card.tasks} color={card.color} />
                    ) : (
                        <CheckList tasks={card.tasks.map(task => task.title)} color={card.color} />
                    )}
                </div>
            );
        };

        // 카드 덱 컴포넌트 (스와이프 기능 추가)
        const CardDeck = ({ card, onClick, onEdit, onDelete }) => {
            const [expanded, setExpanded] = React.useState(false);
            const [swiped, setSwiped] = React.useState(false);
            const [showHint, setShowHint] = React.useState(true);
            const cardRef = React.useRef(null);
            const wrapperRef = React.useRef(null);
            const startX = React.useRef(0);
            const currentX = React.useRef(0);
            const isDragging = React.useRef(false);
            
            React.useEffect(() => {
                // 5초 후에 힌트 숨기기
                const timer = setTimeout(() => {
                    setShowHint(false);
                }, 5000);
                
                return () => clearTimeout(timer);
            }, []);
            
            const toggleExpand = (e) => {
                e.stopPropagation();
                setExpanded(!expanded);
            };
            
            // 마우스 이벤트 핸들러 추가
            const handleMouseDown = (e) => {
                isDragging.current = true;
                startX.current = e.clientX;
                currentX.current = e.clientX;
                document.addEventListener('mousemove', handleMouseMove);
                document.addEventListener('mouseup', handleMouseUp);
            };
            
            const handleMouseMove = (e) => {
                if (!isDragging.current) return;
                
                currentX.current = e.clientX;
                const diff = currentX.current - startX.current;
                
                // 오른쪽으로 드래그할 때만 반응
                if (diff > 0) {
                    const translateX = Math.min(diff, 100); // 최대 100px까지만 이동
                    if (cardRef.current) {
                        cardRef.current.style.transform = `translateX(${translateX}px)`;
                    }
                }
            };
            
            const handleMouseUp = () => {
                if (!isDragging.current) return;
                
                isDragging.current = false;
                document.removeEventListener('mousemove', handleMouseMove);
                document.removeEventListener('mouseup', handleMouseUp);
                
                const diff = currentX.current - startX.current;
                
                if (diff > 50) { // 50px 이상 스와이프하면 액션 버튼 표시
                    setSwiped(true);
                    if (wrapperRef.current) {
                        wrapperRef.current.classList.add('swiped');
                    }
                    setShowHint(false);
                } else {
                    setSwiped(false);
                    if (cardRef.current) {
                        cardRef.current.style.transform = 'translateX(0)';
                    }
                    if (wrapperRef.current) {
                        wrapperRef.current.classList.remove('swiped');
                    }
                }
            };
            
            // 터치 이벤트 핸들러
            const handleTouchStart = (e) => {
                startX.current = e.touches[0].clientX;
                currentX.current = e.touches[0].clientX;
            };
            
            const handleTouchMove = (e) => {
                currentX.current = e.touches[0].clientX;
                const diff = currentX.current - startX.current;
                
                // 오른쪽으로 스와이프할 때만 반응
                if (diff > 0) {
                    const translateX = Math.min(diff, 100); // 최대 100px까지만 이동
                    if (cardRef.current) {
                        cardRef.current.style.transform = `translateX(${translateX}px)`;
                    }
                }
            };
            
            const handleTouchEnd = () => {
                const diff = currentX.current - startX.current;
                
                if (diff > 50) { // 50px 이상 스와이프하면 액션 버튼 표시
                    setSwiped(true);
                    if (wrapperRef.current) {
                        wrapperRef.current.classList.add('swiped');
                    }
                    setShowHint(false);
                } else {
                    setSwiped(false);
                    if (cardRef.current) {
                        cardRef.current.style.transform = 'translateX(0)';
                    }
                    if (wrapperRef.current) {
                        wrapperRef.current.classList.remove('swiped');
                    }
                }
            };
            
            const resetSwipe = () => {
                setSwiped(false);
                if (cardRef.current) {
                    cardRef.current.style.transform = 'translateX(0)';
                }
                if (wrapperRef.current) {
                    wrapperRef.current.classList.remove('swiped');
                }
            };
            
            const handleEdit = (e) => {
                e.stopPropagation();
                onEdit(card.id);
                resetSwipe();
            };
            
            const handleDelete = (e) => {
                e.stopPropagation();
                onDelete(card.id);
                resetSwipe();
            };
            
            const handleCardClick = () => {
                if (!isDragging.current) {
                    onClick(card.id);
                }
            };
            
            return (
                <div className="card-wrapper" ref={wrapperRef}>
                    <div className="card-actions">
                        <button 
                            className="action-button bg-green-mid"
                            onClick={handleEdit}
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h10a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                            </svg>
                        </button>
                        <button 
                            className="action-button bg-red-500"
                            onClick={handleDelete}
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                        </button>
                    </div>
                    
                    <div 
                        ref={cardRef}
                        className="bg-white rounded-xl shadow-md p-5 card"
                        onClick={handleCardClick}
                        onMouseDown={handleMouseDown}
                        onTouchStart={handleTouchStart}
                        onTouchMove={handleTouchMove}
                        onTouchEnd={handleTouchEnd}
                    >
                        {showHint && (
                            <div className="swipe-hint">
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 5l7 7-7 7" />
                                </svg>
                            </div>
                        )}
                        
                        <div className="flex justify-between items-center">
                            <h3 className={`text-lg font-bold color-${card.color}`}>{card.title}</h3>
                            <div className="flex items-center">
                                <span className={`bg-light-${card.color} color-${card.color} text-sm py-1 px-3 rounded-full mr-2`}>
                                    {card.type === 'sequence' ? '순서 있음' : '체크리스트'}
                                </span>
                                <button 
                                    className={`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${expanded ? `bg-light-${card.color}` : 'bg-gray-100'}`}
                                    onClick={toggleExpand}
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" className={`h-5 w-5 transition-transform ${expanded ? 'transform rotate-180' : ''} color-${card.color}`} fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 9l-7 7-7-7" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <div className={`task-summary ${expanded ? 'expanded' : ''}`}>
                            <div className="mt-3 pt-3 border-t border-gray-100">
                                <ul className="text-sm text-gray-700">
                                    {card.tasks.map((task, index) => (
                                        <li key={index} className="mb-1">• {task.title}</li>
                                    ))}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // 하단 탭 바 컴포넌트
        const Footer = () => {
            return (
                <footer className="fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-100">
                    <div className="flex justify-around">
                        <button className="flex flex-col items-center py-3 px-6 text-gray-400 hover:text-gray-600" onClick={() => window.location.href = 'diary.html'}>
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            <span className="text-xs mt-1">감정 일기</span>
                        </button>
                        <button className="flex flex-col items-center py-3 px-6 text-green-point" onClick={() => window.location.href = 'intdex.html'}>
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                            </svg>
                            <span className="text-xs mt-1">할 일</span>
                        </button>
                        <button className="flex flex-col items-center py-3 px-6 text-gray-400 hover:text-gray-600" onClick={() => window.location.href = 'simulation.html'}>
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4" />
                            </svg>
                            <span className="text-xs mt-1">시뮬레이션</span>
                        </button>
                    </div>
                </footer>
            );
        };

        // 추가 버튼 컴포넌트
        const AddButton = ({ onClick }) => {
            return (
                <button 
                    className="add-button"
                    onClick={onClick}
                >
                    <svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 4v16m8-8H4" />
                    </svg>
                </button>
            );
        };

        // 메인 앱 컴포넌트
        const App = () => {
            const [activeTab, setActiveTab] = React.useState('routine');
            const [selectedCard, setSelectedCard] = React.useState(null);
            
            // 샘플 데이터 - 랜덤 색상으로 변경
            const todoCards = [
                {
                    id: 1,
                    title: '아침 준비하기',
                    type: 'sequence',
                    color: getRandomColor(),
                    tasks: [
                        { title: '세수하기', description: '화장실에 가서 얼굴을 씻어요.' },
                        { title: '양치하기', description: '치약을 짜서 이를 닦아요.' },
                        { title: '옷 입기', description: '오늘 입을 옷을 골라 입어요.' },
                        { title: '아침 먹기', description: '건강한 아침 식사를 해요.' }
                    ]
                },
                {
                    id: 2,
                    title: '장보기',
                    type: 'checklist',
                    color: getRandomColor(),
                    tasks: [
                        { title: '우유 사기' },
                        { title: '빵 사기' },
                        { title: '과일 사기' },
                        { title: '야채 사기' },
                        { title: '고기 사기' }
                    ]
                },
                {
                    id: 3,
                    title: '청소하기',
                    type: 'checklist',
                    color: getRandomColor(),
                    tasks: [
                        { title: '바닥 쓸기' },
                        { title: '먼지 닦기' },
                        { title: '빨래 개기' }
                    ]
                },
                {
                    id: 4,
                    title: '저녁 준비하기',
                    type: 'sequence',
                    color: getRandomColor(),
                    tasks: [
                        { title: '재료 준비하기', description: '냉장고에서 필요한 재료를 꺼내요.' },
                        { title: '요리하기', description: '레시피를 보고 요리를 시작해요.' },
                        { title: '식탁 차리기', description: '식탁에 음식과 수저를 놓아요.' }
                    ]
                }
            ];
            
            const routineCards = [
                {
                    id: 5,
                    title: '아침 루틴',
                    type: 'checklist',
                    color: getRandomColor(),
                    tasks: [
                        { title: '기상하기' },
                        { title: '물 한 잔 마시기' },
                        { title: '스트레칭하기' },
                        { title: '세면하기' }
                    ]
                },
                {
                    id: 6,
                    title: '저녁 루틴',
                    type: 'checklist',
                    color: getRandomColor(),
                    tasks: [
                        { title: '내일 옷 준비하기' },
                        { title: '일기 쓰기' },
                        { title: '양치하기' },
                        { title: '취침하기' }
                    ]
                }
            ];
            
            const cards = activeTab === 'todo' ? todoCards : routineCards;
            
            const handleCardClick = (cardId) => {
                const card = [...todoCards, ...routineCards].find(c => c.id === cardId);
                setSelectedCard(card);
            };
            
            const handleBackClick = () => {
                setSelectedCard(null);
            };
            
            const handleAddClick = () => {
                alert('새로운 할 일 추가 기능이 구현될 예정입니다.');
            };
            
            const handleEditCard = (cardId) => {
                alert(`카드 ID ${cardId}를 수정합니다.`);
            };
            
            const handleDeleteCard = (cardId) => {
                alert(`카드 ID ${cardId}를 삭제합니다.`);
            };
            
            return (
                <div className="pb-20">
                    <Header />
                    
                    <main className="container mx-auto px-4">
                        <DateDisplay />
                        
                        {selectedCard ? (
                            <div>
                                <div className="flex items-center mb-4">
                                    <button 
                                        className="mr-3 bg-gray-100 p-2 rounded-full"
                                        onClick={handleBackClick}
                                    >
                                        <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 text-gray-800" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 19l-7-7 7-7" />
                                        </svg>
                                    </button>
                                    <h2 className="text-xl font-bold text-gray-800">뒤로가기</h2>
                                </div>
                                <CardDetail card={selectedCard} />
                            </div>
                        ) : (
                            <>
                                <TabMenu activeTab={activeTab} setActiveTab={setActiveTab} />
                                
                                <h2 className="text-xl font-bold mb-4 text-gray-800">
                                    {activeTab === 'todo' ? '오늘 할 일' : '나의 루틴'}
                                </h2>
                                
                                <div className="grid grid-cols-1 gap-4 md:grid-cols-2">
                                    {cards.map(card => (
                                        <CardDeck 
                                            key={card.id} 
                                            card={card} 
                                            onClick={handleCardClick}
                                            onEdit={handleEditCard}
                                            onDelete={handleDeleteCard}
                                        />
                                    ))}
                                </div>
                                
                                <div className="text-center mt-6 mb-4 text-gray-700 text-sm">
                                    카드를 오른쪽으로 스와이프하면 수정/삭제 버튼이 나타납니다
                                </div>
                            </>
                        )}
                    </main>
                    
                    {!selectedCard && <AddButton onClick={handleAddClick} />}
                    <Footer />
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9629da8d52b72916',t:'MTc1MzA5MjA1Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
